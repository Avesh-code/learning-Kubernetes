# Kubernetes Documentation
## 1. Kubernetes Monitoring
---
## Observability
Observability is the ability to understand the internal state of a system based on the data it produces, such as logs, metrics, and traces. It helps in monitoring, debugging, and optimizing complex systems like Kubernetes clusters.

## Core Pillars of Observability

### Metrics
- Numerical measurements collected over time.
- Examples: CPU usage, memory consumption, request latency.
- Tools: Prometheus (collection), Grafana (visualization).

### Logs
- Time-stamped, structured/unstructured text entries recording events.
- Examples: Application logs, system logs, audit logs.
- Tools: Fluentd, Elasticsearch, Kibana, Loki.

### Traces
- Detailed records of requests as they flow through distributed systems.
- Help understand request paths and latencies.
- Tools: OpenTelemetry, Jaeger, Zipkin.

## Importance of Observability in Kubernetes

- Kubernetes is dynamic and distributed, with many moving components.
- Helps identify issues at infrastructure, cluster, node, pod, or application level.
- Facilitates troubleshooting, root cause analysis, performance optimization.
- Enables proactive alerting and capacity planning.

## Observability Stack in Kubernetes

- **Prometheus**: Metrics collection from kubelets, API server, custom apps.
- **Grafana**: Dashboarding and visualization of metrics.
- **Logging Solution**: Elasticsearch + Fluentd + Kibana (EFK stack) or Loki and Grafana.
- **Tracing**: Jaeger or Zipkin integrated with OpenTelemetry instruments.

## Observability Best Practices

- Collect rich metrics including application, cluster, and custom business metrics.
- Centralize logs and correlate with metrics/traces for comprehensive insight.
- Use tracing for detailed request flow analysis in microservices.
- Implement RBAC for secure access to observability data.
- Set up automated alerts to detect anomalies early.
- Continuously improve and adapt observability setup as cluster and apps evolve.
---

---
## Installation of Prometheus and Grafana
---
### Step:1 Install Helm
```bash
curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3
chmod 700 get_helm.sh
./get_helm.sh
```
### Step:2 Make a new Namespace
```bash
kubectl create namespace monitoring
```
### Step:3 Add Prometheus community chart
```bash
helm repo add prometheus-community https://prometheus-community.github.io/helm-charts
helm repo list
helm repo update
```
### Step:4 install prometheus Stack 
```bash
helm install prometheus-stack prometheus-community/kube-prometheus-stack --namespace monitoring --set prometheus.service.nodePort=30000 --set grafana.service.nodePort=31000 --set grafana.service.type=NodePort --set prometheus.service.type=NodePort
```
### step:5 We can access the Grafana and promeheus using the Control-Plane IP and Node Port Define
```bash
kubectl get pods -n monitoring
kubectl get nodes -o wide
kubectl svc -n monitoring
```
### Step:6 WE can get the password of Grafana using below command
```bash
kubectl --namespace monitoring get secrets prometheus-stack-grafana -o jsonpath="{.data.admin-password}" | base64 -d ; echo
```
> `http://<NODE_IP>:30000` for prometheus
> `http://<NODE_IP>:31000` for Grafana
